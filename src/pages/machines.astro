---
import { getCollection, getEntry } from 'astro:content'
import Layout from '@layouts/Layout.astro'
import { getLocale } from 'astro-i18n-aut'
import MachinesShowcase from '@components/machinesShowcase.astro'

export function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'sk' } }]
}

export const prerender = true

const locale = getLocale(Astro.url)
const machines = await getCollection('team', ({ id }) => id.startsWith(locale))
const machs = await getEntry('machines', locale + '/machines')
---

<Layout title={machs.data.layouttitle} description={machs.data.description}>
  <MachinesShowcase machs={machs} machines={machines} locale={locale} />
</Layout>
